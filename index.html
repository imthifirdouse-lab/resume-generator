<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Resume Builder + Photo</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #eef2f5; display: flex; justify-content: center; padding: 20px; }
        .app-container { background: white; width: 100%; max-width: 950px; padding: 40px; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        
        h1 { text-align: center; color: #2c3e50; font-size: 28px; margin-bottom: 10px; }
        p.subtitle { text-align: center; color: #7f8c8d; margin-bottom: 40px; }
        
        .form-section { margin-bottom: 30px; border-bottom: 1px solid #eee; padding-bottom: 20px; }
        .form-section h3 { color: #34495e; margin-bottom: 15px; text-transform: uppercase; font-size: 14px; letter-spacing: 1px; }
        
        label { display: block; font-weight: 600; margin: 10px 0 5px; color: #2c3e50; font-size: 0.9rem; }
        input, textarea { width: 100%; padding: 12px; border: 1px solid #dfe6e9; border-radius: 6px; font-size: 14px; box-sizing: border-box; transition: 0.3s; }
        input:focus, textarea:focus { border-color: #3498db; outline: none; box-shadow: 0 0 5px rgba(52, 152, 219, 0.2); }
        textarea { resize: vertical; font-family: inherit; }

        /* Image Upload Styling */
        .image-upload-box { border: 2px dashed #bdc3c7; padding: 20px; text-align: center; border-radius: 8px; cursor: pointer; transition: 0.3s; background: #f9f9f9; }
        .image-upload-box:hover { border-color: #3498db; background: #ecf0f1; }
        #preview-img { max-width: 100px; max-height: 100px; border-radius: 50%; margin-top: 10px; display: none; border: 3px solid #3498db; }

        .btn-download { background: linear-gradient(135deg, #2980b9, #2c3e50); color: white; border: none; padding: 15px 30px; font-size: 16px; font-weight: bold; border-radius: 8px; cursor: pointer; width: 100%; margin-top: 20px; box-shadow: 0 4px 15px rgba(44, 62, 80, 0.3); transition: transform 0.2s; }
        .btn-download:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(44, 62, 80, 0.4); }

        .row { display: flex; gap: 20px; }
        .col { flex: 1; }
        @media (max-width: 600px) { .row { flex-direction: column; } }
    </style>
</head>
<body>

<div class="app-container">
    <h1>üöÄ Modern Resume Architect</h1>
    <p class="subtitle">Upload your photo and edit details below.</p>

    <div class="form-section">
        <h3>üë§ Personal Identity & Photo</h3>
        <div class="row">
            <div class="col">
                <label>Profile Picture</label>
                <div class="image-upload-box" onclick="document.getElementById('imgInput').click()">
                    <span>Click to Upload Photo</span>
                    <input type="file" id="imgInput" accept="image/*" style="display: none" onchange="previewImage()">
                    <br>
                    <img id="preview-img" src="" alt="Profile Preview">
                </div>
            </div>
            <div class="col">
                <label>Full Name</label>
                <input type="text" id="name" placeholder="Imtheyas F.M">
                <label>Job Title</label>
                <input type="text" id="jobTitle" placeholder="Team Lead / Senior Software Engineer">
            </div>
        </div>
        <div class="row">
            <div class="col">
                <label>Phone</label>
                <input type="text" id="phone" placeholder="+91-8248524660">
            </div>
            <div class="col">
                <label>Email</label>
                <input type="text" id="email" placeholder="mohamedimtheyas254@gmail.com">
            </div>
            <div class="col">
                <label>Location</label>
                <input type="text" id="location" placeholder="Coimbatore, India">
            </div>
        </div>
    </div>

    <div class="form-section">
        <h3>üõ†Ô∏è Sidebar Content</h3>
        <div class="row">
            <div class="col">
                <label>Technical Arsenal (One per line)</label>
                <textarea id="skills" rows="8">Languages: Perl, SQL, DMN
Scripting: Unix Shell
Tools: Jira, Atlas, Putty
IDE: VS Code
VCS: SVN, Perforce (P4V)
OS: Unix, Linux
Methodologies: Agile/Scrum</textarea>
            </div>
            <div class="col">
                <label>Education & Certs</label>
                <textarea id="education" rows="8">B.E. ECE (2019)
Sri Eshwar College
GPA: 6.72

CERTIFICATIONS:
GitHub Copilot: AI Pair Prog.
NPTEL: Internet of Things</textarea>
            </div>
        </div>
    </div>

    <div class="form-section">
        <h3>üìÑ Main Experience</h3>
        <label>Professional Summary</label>
        <textarea id="summary" rows="3">Experienced Team Lead and Senior Software Engineer with a focus on guiding technical teams to achieve milestones. Expert in migrating legacy Perl rules to DMN architecture and utilizing advanced problem-solving techniques to drive innovation. Knowledgeable in Agile methodologies ensuring robust scalable solutions.</textarea>
        
        <label>Experience 1 (Latest)</label>
        <textarea id="exp1" rows="6">Team Lead / Senior Software Engineer
GAVS Technologies | 09/2022 - Present
‚Ä¢ Facilitated Scrum framework (Sprint Planning, Backlog Grooming, Reviews) for the team.
‚Ä¢ Empowered team members by delegating responsibilities based on individual strengths.
‚Ä¢ Migrated legacy logic from Perl to DMN (Decision Model Notation) for Athena Healthcare.
‚Ä¢ Collaborated with Product Owners to refine requirements and ensure alignment.
‚Ä¢ Tools Worked: Putty, VS code, Jira, Atlas.</textarea>

        <label>Experience 2</label>
        <textarea id="exp2" rows="6">Software Engineer
RR Donnelly | 04/2021 - 09/2022
‚Ä¢ Engineered Perl-based data integration solutions, sourcing new data approaches.
‚Ä¢ Addressed trouble ticket requests in on-call rotation for Production Support.
‚Ä¢ Involved in Unit/Component testing and debugging against system requirements.
‚Ä¢ Tools Worked: Putty, Power Stream, SVN.</textarea>

        <label>Experience 3</label>
        <textarea id="exp3" rows="6">Member Technical
Broadridge Financial Solutions | 05/2019 - 01/2021
‚Ä¢ Refactored existing Perl code to improve performance, security, and readability.
‚Ä¢ Identified and sourced new data approaches for integration.
‚Ä¢ Achieved 'Quarterly Star Award' twice for delivery excellence.
‚Ä¢ Tools Worked: Putty, Perforce (P4V).</textarea>
    </div>

    <button class="btn-download" onclick="generateModernPDF()">‚ú® Generate Modern PDF</button>
</div>

<script>
    let profileImageBase64 = null;

    function previewImage() {
        const file = document.getElementById("imgInput").files[0];
        const reader = new FileReader();
        reader.onloadend = function() {
            profileImageBase64 = reader.result;
            const img = document.getElementById("preview-img");
            img.src = profileImageBase64;
            img.style.display = "block";
        }
        if (file) {
            reader.readAsDataURL(file);
        }
    }

    function generateModernPDF() {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();

        // COLORS
        const SIDEBAR_COLOR = [44, 62, 80]; // Dark Navy
        const TEXT_LIGHT = [255, 255, 255]; // White
        const TEXT_DARK = [44, 62, 80]; // Dark Grey
        const ACCENT_COLOR = [52, 152, 219]; // Light Blue

        // DIMENSIONS
        const pageHeight = doc.internal.pageSize.height;
        const pageWidth = doc.internal.pageSize.width;
        const sidebarWidth = 65; 
        const margin = 10;
        
        // --- DRAW SIDEBAR (LEFT) ---
        doc.setFillColor(...SIDEBAR_COLOR);
        doc.rect(0, 0, sidebarWidth, pageHeight, 'F');

        // --- PROFILE PICTURE ---
        let ySide = 20;
        
        if (profileImageBase64) {
            // Add Uploaded Image (Square aspect ratio for stability)
            try {
                doc.addImage(profileImageBase64, 'JPEG', margin + 5, 20, 35, 35);
            } catch (e) {
                // Fallback if format issues
                console.error("Image error", e);
            }
            ySide = 65;
        } else {
            // Fallback Circle with Initials
            doc.setFillColor(200, 200, 200);
            doc.circle(sidebarWidth/2, 35, 18, 'F');
            doc.setFontSize(24);
            doc.setTextColor(255, 255, 255);
            const nameVal = document.getElementById('name').value || "IM";
            const initials = nameVal.split(' ').map(n => n[0]).join('').substring(0,2);
            doc.text(initials, (sidebarWidth/2)-6, 43);
            ySide = 70;
        }

        // Helper: Sidebar Section
        function addSidebarSection(title, contentId) {
            doc.setFont("helvetica", "bold");
            doc.setFontSize(12);
            doc.setTextColor(...ACCENT_COLOR);
            doc.text(title.toUpperCase(), margin, ySide);
            ySide += 7;

            doc.setFont("helvetica", "normal");
            doc.setFontSize(10);
            doc.setTextColor(...TEXT_LIGHT);
            
            const text = document.getElementById(contentId).value;
            const splitText = doc.splitTextToSize(text, sidebarWidth - (margin*2));
            doc.text(splitText, margin, ySide);
            ySide += (splitText.length * 5) + 10;
        }

        // Contact Info
        doc.setFont("helvetica", "bold");
        doc.setFontSize(12);
        doc.setTextColor(...ACCENT_COLOR);
        doc.text("CONTACT", margin, ySide);
        ySide += 8;
        doc.setFont("helvetica", "normal");
        doc.setFontSize(9);
        doc.setTextColor(...TEXT_LIGHT);
        
        const phone = document.getElementById('phone').value;
        const email = document.getElementById('email').value;
        const loc = document.getElementById('location').value;
        
        doc.text(phone, margin, ySide); ySide += 6;
        const splitEmail = doc.splitTextToSize(email, sidebarWidth - 15);
        doc.text(splitEmail, margin, ySide); ySide += (splitEmail.length * 5) + 2;
        doc.text(loc, margin, ySide); ySide += 15;

        // Skills & Education
        addSidebarSection("TECHNICAL SKILLS", "skills");
        addSidebarSection("EDUCATION", "education");


        // --- MAIN CONTENT (RIGHT) ---
        let yMain = 20;
        const xMain = sidebarWidth + 15;
        const mainWidth = pageWidth - sidebarWidth - 25;

        // Header (Name & Title)
        const name = document.getElementById('name').value || "YOUR NAME";
        const job = document.getElementById('jobTitle').value || "JOB TITLE";

        doc.setFont("helvetica", "bold");
        doc.setFontSize(24);
        doc.setTextColor(...TEXT_DARK);
        doc.text(name.toUpperCase(), xMain, yMain + 5);
        
        doc.setFontSize(12);
        doc.setTextColor(...ACCENT_COLOR);
        doc.text(job.toUpperCase(), xMain, yMain + 14);
        
        doc.setDrawColor(200, 200, 200);
        doc.line(xMain, yMain + 20, pageWidth - margin, yMain + 20);
        
        yMain += 30;

        // Helper: Main Section
        function addMainSection(title, content) {
            if (yMain > 250) { doc.addPage(); yMain = 20; }

            doc.setFont("helvetica", "bold");
            doc.setFontSize(12);
            doc.setTextColor(...TEXT_DARK);
            doc.text(title.toUpperCase(), xMain, yMain);
            
            doc.setDrawColor(...ACCENT_COLOR);
            doc.setLineWidth(1);
            doc.line(xMain, yMain + 2, xMain + 30, yMain + 2);
            
            yMain += 10;
            doc.setFont("helvetica", "normal");
            doc.setFontSize(10.5);
            doc.setTextColor(60, 60, 60);

            const lines = doc.splitTextToSize(content, mainWidth);
            doc.text(lines, xMain, yMain);
            yMain += (lines.length * 6) + 10;
        }

        // Summary
        addMainSection("Professional Summary", document.getElementById('summary').value);

        // Experience Loop
        function addExperience(id) {
            const raw = document.getElementById(id).value;
            if(!raw) return;
            
            const lines = raw.split('\n');
            const titleLine = lines[0]; 
            const companyLine = lines[1]; 
            const bullets = lines.slice(2).join('\n'); 

            if (yMain > 230) { doc.addPage(); yMain = 20; }

            // Title
            doc.setFont("helvetica", "bold");
            doc.setFontSize(12);
            doc.setTextColor(0, 0, 0);
            doc.text(titleLine, xMain, yMain);
            yMain += 5;

            // Company
            doc.setFont("helvetica", "italic");
            doc.setFontSize(10);
            doc.setTextColor(100, 100, 100);
            doc.text(companyLine, xMain, yMain);
            yMain += 6;

            // Bullets
            doc.setFont("helvetica", "normal");
            doc.setTextColor(60, 60, 60);
            const splitBullets = doc.splitTextToSize(bullets, mainWidth);
            doc.text(splitBullets, xMain, yMain);
            yMain += (splitBullets.length * 5) + 8;
        }
        
        doc.setFont("helvetica", "bold");
        doc.setFontSize(12);
        doc.setTextColor(...TEXT_DARK);
        doc.text("WORK HISTORY", xMain, yMain);
        doc.setDrawColor(...ACCENT_COLOR);
        doc.line(xMain, yMain + 2, xMain + 30, yMain + 2);
        yMain += 10;

        addExperience('exp1');
        addExperience('exp2');
        addExperience('exp3');

        doc.save("Modern_Resume_With_Photo.pdf");
    }
</script>

</body>
</html>
